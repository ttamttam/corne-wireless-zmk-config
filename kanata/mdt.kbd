;; Matt's config

;; Meant to work with a BÃ‰PO layout: officially available both on Linux and
;; WindowsÂ® and gives access to enough characters for my own use, and beyond.

(defcfg
  process-unmapped-keys yes
  tray-icon kanata-icon.svg																			 ;; used on windows
	linux-dev /dev/input/by-path/platform-i8042-serio-0-event-kbd  ;; Only apply to my notebook internal keyboard
)

(defvar tap-time 300 hold-time 300)

;; TODO:
;; - advanced home row mode,
;; - finish the ' dead key,

(defalias
  ;; m apo
	;; z ã€
  ;; w ã€‘

	Ã§ \

  fn (tap-hold $tap-time $hold-time â£ (layer-while-held fn))
  Ã© (tap-hold $tap-time $hold-time w ralt)
  l (tap-hold $tap-time $hold-time o ralt)
  a (tap-hold $tap-time $hold-time a lmet)
  u (tap-hold $tap-time $hold-time s lalt)
  i (tap-hold $tap-time $hold-time d lctl)
  e (tap-hold $tap-time $hold-time f lsft)
  t (tap-hold $tap-time $hold-time j rsft)
  s (tap-hold $tap-time $hold-time k rctl)
  r (tap-hold $tap-time $hold-time l lalt)
  n (tap-hold $tap-time $hold-time ; lmet)

  âŒ« (tap-hold $tap-time $hold-time âŒ« (layer-while-held numeric))
  â (tap-hold $tap-time $hold-time â (layer-while-held numeric))
	. (tap-hold $tap-time $hold-time v (layer-while-held symbol))
	q (tap-hold $tap-time $hold-time m (layer-while-held symbol))
	
	^ RA-6
	< RA-2
  > RA-3
	{ RA-x
  } RA-c
	~ RA-b
	[ RA-4
	] RA-5
	_ RA-spc
	$ grv
	# S-grv
	& RA-e
	| RA-q
	\ RA-z
	! S-y
	: S-v
	? S-n
	â™ prnt
	' (macro sldr 10 n)
)

;; SRC dâ€™un qwerty
;; (defsrc
;;   `    1    2    3    4    5    6    7    8    9    0    -    =    âŒ«
;;   â­¾   q    w    e    r    t    y    u    i    o    p    [    ]    \
;;   â‡ª    a    s    d    f    g    h    j    k    l    ;    '    â
;;   â€¹â‡§   z    x    c    v    b    n    m    ,    .    /    â‡§â€º
;;   â€¹âˆ â€¹âŒ˜ â€¹âŒ¥           â£            âŒ¥â€º âŒ˜â€º âˆâ€º
;; )

;; Je mâ€™intÃ©resse Ã  un sous-ensemble:
(defsrc
 â­¾    q w  e  r  t  y  u  i  o  p  [
 â‡ª     a s  d  f  g  h  j  k  l  ;  '
 â€¹â‡§  < z x  c  v  b  n  m  ,  .  /  â‡§â€º
        â€¹âŒ¥  â£   âŒ¥â€º
)

(deflayer (base ğŸ–» kanata-icon.svg)
â­¾ _  @Ã©   _  _   _   _     _   _   @l  _  ]
â‹ @a  @u  @i  @e  _   _    @t  @s  @r  @n  _
âŒ¦ z   x  c  @.  b  <  _  @q _  _ _  [
           @âŒ«   @fn  @â
)

(deflayer (numeric ğŸ–» numeric.png)
â­¾  â­¾   â†–    â–²     â†˜   â‡         kp/ kp7 kp8 kp9 kp* â‡­
â‹  â‡ª   â—€    â–¼     â–¶   â‡Ÿ         kp- kp4 kp5 kp6 kp0 7
âŒ¦	 2   3    _     _   _     _   kp. kp1 kp2 kp3	v _
            _  _  _
)

(deflayer symbol
â­¾ @^  @<   @>    @$     =       6  @&  0   n   S-= _
â‹  @{  4    5     @}     -       @\  7  8   9   1  _
âŒ¦	 @~  @[   @]    @_     @#  _   @|  @! S-g @:  @? _
            _  _  _
)

(deflayer fn
ğŸ”‡ f1 f2 f3 f4  f5    f6 f7 f8 f9 f10 _
ğŸ”Š â€   â™  â‡³ğŸ”’ _  ğŸ”†     _  _  _  _  _   _
ğŸ”‰ 2  3 f11 f12 ğŸ”… _   _ _   _  _  _  _
      âŒ¦ _ â‹
)

(deffakekeys
  Ã¨ t	Ãˆ S-t
	Ãª	(macro y 10 f) ÃŠ (macro y 10 S-f)
  Ã© w Ã‰ S-w
  Ã  z	Ã€ S-z
	Ã¢ (macro y 10 a) Ã‚ (macro y 10 S-a)
  Ã¹ RA-s Ã™ S-RA-s
  Ã§ \ Ã‡ S-\
	ÃŸ RA-k áº RA-S-k
  quote (macro n))

(defseq
  Ã¨ (n f)	Ãˆ (n S-f)
	Ã© (n d)	Ã‰ (n S-d)
	Ãª (n g) ÃŠ (n S-g)
	Ã  (n a)	Ã€ (n S-a)
	Ã¢ (n q) Ã‚ (n S-q)
	Ã¹ (n s) Ã™ (n S-s)
	Ã§ (n h) Ã‡ (n S-h)
	ÃŸ (n k) áº (n S-k)
  quote (n â£))

;; â‡ª â‹ â€¹â‡§ â‡§â€º â€¹âŒ¥ âŒ¥â€º âŒ« âŒ¦   â–¶ â–¼ â–² â—€ ã€ ã€‘ â€ â™
;; https://dev.to/shanu-kumawat/how-to-set-up-kanata-on-nixos-a-step-by-step-guide-1jk#roc
;; https://github.com/jtroo/kanata/blob/main/parser/src/keys/mod.rs


